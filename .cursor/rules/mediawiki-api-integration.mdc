---
description: MediaWiki API usage patterns and best practices
---

# MediaWiki API Integration

## Base Configuration
- Base URL: `https://nomanssky.fandom.com`
- API Endpoint: `{base_url}/api.php`
- User-Agent: `NMSWikiScraper/1.0 (https://github.com/user/nms-scraper)`

## Core API Operations

### Category Member Retrieval
```python
params = {
    'action': 'query',
    'list': 'categorymembers',
    'cmtitle': f'Category:{category}',
    'cmlimit': min(limit, 500),  # Max 500 per request
    'format': 'json',
    'formatversion': '2'
}
```

### All Categories Listing
```python
params = {
    'action': 'query',
    'list': 'allcategories',
    'aclimit': min(limit, 500),
    'format': 'json',
    'formatversion': '2'
}
```

### Raw Page Content
Use direct URL approach: `{base_url}/wiki/{encoded_title}?action=raw`
- URL encode page titles with spaces as underscores
- Handle redirects and missing pages gracefully

## Rate Limiting Strategy
- Default 1.0 second delay between requests
- Configurable via command line `--delay` parameter
- Use `time.sleep()` after each API call
- Log progress every 10 items for long operations

## Error Handling
- Catch `requests.exceptions.RequestException` for network issues
- Check for API error responses in JSON
- Log warnings for missing pages or empty categories
- Continue processing other items on individual failures

## Pagination Support
- Handle `continue` parameters for large result sets
- Process results in chunks of 500 (API maximum)
- Track total items processed across all pages